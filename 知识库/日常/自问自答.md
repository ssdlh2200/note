# 广场

## Java中object header（对象头）和monitor的关系

首先java中每个对象都有一个object header，其中object header包含

- mark word 和 klass pointer

  - mark word记录当前对象的信息，哈希码，锁信息，gc标记等
  - klass pointer就是指向当前对象的类型的指针

- 当我们使用synchronized获取锁的时候，当锁升级为重量级锁的时候，那么锁的对象头会指向一个monitor，其中monitor包含

  - entrylist（等待获取锁进入这里）
  - waitset（释放了锁进入这里，等待被唤醒）
  - owner

  当其他线程获取锁的时候发现已经有指向的monitor

   - - 此时会检查owner是否有线程，如果有进入entrylist等待集合，等待owner释放锁
   - - 如果没有则成为新的owner（失败则继续进入entrylist）



# 问答

## 讲一下java中的线程

java中的线程运行的基本逻辑是通过thread类和runnable接口来运行，thread类负责线程的生命周期，比如：线程创建，运行，销毁等，而runnbale接口则负责任务逻辑的编写

java的线程使用（也就是创建），大体可以分成2类，也就是有无返回值
1. 无返回值
    - 1.我们一般通过继承thread类，重写run方法来创建线程。2.我们也可以通过实现runnable接口然后将其对象交给线程或者线程池运行
2. 有返回值
    - 1.当我们需要返回值时，就要将callable封装为futuretask对象，然后交给线程或者线程池运行。2.runnable封装未futuretask对象要设置默认返回值

## 讲一下run方法和start方法





