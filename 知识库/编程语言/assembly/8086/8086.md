# 8086
## 8086寄存器

| 寄存器缩写 | 全称                           | 组成部分    | 类型    |
| ----- | ---------------------------- | ------- | ----- |
| AX    | Accumulator Register（累加器寄存器） | AH / AL | 通用寄存器 |
| BX    | Base Register（基址寄存器）         | BH / BL | 通用寄存器 |
| CX    | Count Register（计数寄存器）        | CH / CL | 通用寄存器 |
| DX    | Data Register（数据寄存器）         | DH / DL | 通用寄存器 |
| CS    | Code Segment（代码段寄存器）         | -       | 段寄存器  |
| DS    | Data Segment（数据段寄存器）         | -       | 段寄存器  |
| SS    | Stack Segment（栈段寄存器）         | -       | 段寄存器  |
| ES    | Extra Segment（附加段寄存器）        | -       | 段寄存器  |
| SP    | Stack Pointer（栈指针寄存器）        | -       | 指针寄存器 |
| BP    | Base Pointer（基址指针寄存器）        | -       | 指针寄存器 |
| SI    | Source Index（源变址寄存器）         | -       | 变址寄存器 |
| DI    | Destination Index（目的变址寄存器）   | -       | 变址寄存器 |
| IP    | Instruction Pointer（指令指针寄存器） | -       | 指令指针  |
| FLAGS | Flag Register（标志寄存器）         | -       | 标志寄存器 |

### AX寄存器
AX寄存器能够存储2个字节的数据，也就是16比特位，能够存储的最大值就是0xFFFF
```text
AX 寄存器 (16位)
┌─────────────────┬─────────────────┐
│       AH        │       AL        │
│ 0 0 0 0 0 0 0 0 │ 0 0 0 0 0 0 0 0 │
└─────────────────┴─────────────────┘

【例】存储18
┌─────────────────┬─────────────────┐
│       AH        │       AL        │
│ 0 0 0 0 0 0 0 0 │ 0 0 0 1 0 0 1 0 │
└─────────────────┴─────────────────┘
```
8086的寄存器是16位的，那么下一代的32位，64位的寄存兼容上一个代的示意图如下:
```text
EAX 寄存器 (32位)
┌─────────────────┬─────────────────┐
│                 │       AX        │
│      16bits     │      16bits     │
└─────────────────┴─────────────────┘
RAX 寄存器 (64位)
┌─────────────────┬─────────────────┐
│                 │       EAX       │
│      32bits     │      32bits     │
└─────────────────┴─────────────────┘
```

- 8086的 word size（字长）为16bit
- 80386的 word size 为32bit
- x86-64的 word size 为64bit

## 8086物理地址
```
┌────────────────┬─────────────────────────┬─────────────┐
│    地址范围     │ 用途                  │ Size        │
├────────────────┼─────────────────────────┼─────────────┤
│ 00000H         │ Main RAM start           │             │
│ 00000H–9FFFFH  │ Main RAM               │ 640 KB      │
├────────────────┼─────────────────────────┼─────────────┤
│ A0000H         │ Video RAM start          │             │
│ A0000H–BFFFFH  │ Video RAM / Framebuffer │ 128 KB      │
├────────────────┼─────────────────────────┼─────────────┤
│ C0000H         │ ROM start                │             │
│ C0000H–FFFFEH  │ System ROM / BIOS       │ 256 KB      │
├────────────────┼─────────────────────────┼─────────────┤
│ FFFF0H         │ CPU Reset vector         │ 16 bytes    │
│                │ (CS:IP = FFFF:0000)     │             │
└────────────────┴─────────────────────────┴─────────────┘

```

<table border="1" cellspacing="0" cellpadding="5">
  <tr style="background-color:#f8f9fa;">
    <th>Range</th>
    <th>Size</th>
    <th>Usage</th>
  </tr>
  <tr style="background-color:#cce0ff;">
    <td>00000H</td>
    <td></td>
    <td>主存储器地址空间</td>
  </tr>
  <tr style="background-color:#cce0ff;">
    <td>9FFFFH</td>
    <td>640 KB</td>
  </tr>
  <tr style="background-color:#ccffcc;">
    <td>A0000H</td>
    <td></td>
    <td>Video RAM start</td>
  </tr>
  <tr style="background-color:#ccffcc;">
    <td>BFFFFH</td>
    <td>128 KB</td>
    <td>Video RAM / Framebuffer</td>
  </tr>
  <tr style="background-color:#ffd9b3;">
    <td>C0000H</td>
    <td></td>
    <td>ROM start</td>
  </tr>
  <tr style="background-color:#ffd9b3;">
    <td>FFFFEH</td>
    <td>256 KB</td>
    <td>System ROM / BIOS</td>
  </tr>
  <tr style="background-color:#ffe6e6;">
    <td>FFFF0H</td>
    <td>16 bytes</td>
    <td>CPU Reset vector</td>
  </tr>
  <tr style="background-color:#ffe6e6;">
    <td></td>
    <td></td>
    <td>(CS:IP = FFFF:0000)</td>
  </tr>
</table>

## 8086指令
### mov 数据传送指令
```
MOV 目的操作数, 源操作数
```
把源操作数内容复制到目的操作数

| 类型          | 示例                 | 说明                   |     |
| ----------- | ------------------ | -------------------- | --- |
| 寄存器 ← 寄存器   | MOV AX, BX         | 把 BX 的内容复制到 AX       |     |
| 寄存器 ← 内存    | MOV AL, \[1234H\]  | 把内存单元 1234H 的内容送入 AL |     |
| 内存    ← 寄存器 | MOV \[2000H\], DL  | 把 DL 的内容存入内存 2000H   |     |
| 寄存器 ← 立即数   | MOV CX, 1234H      | 把立即数 1234H 送入 CX     |     |
| 内存    ← 立即数 | MOV \[3000H\], 25H | 把 25H 写入内存 3000H     |     |
- mov只是复制数据，不影响标志寄存器（FLAGS）
- 源数据不会变，只是复制
- ❌不允许内存到内存传送

### add
```asm
assume cs:hello

hello segment

    mov ax, 18h ;将18存入寄存器ax
    mov ah, 78h ;将78存入寄存器ax的高8位
    add al, 0F0h

    mov ax, 4c00h
    int 21h     ;相当于c语言中return 0
hello ends

end
```
- add al bl 若其中al溢出，那么是否会存储到ah中?
- 不会
