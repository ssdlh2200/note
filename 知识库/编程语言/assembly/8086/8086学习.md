# 8086学习
## 8086寄存器

| 寄存器缩写 | 全称                           | 组成部分    | 类型    |
| ----- | ---------------------------- | ------- | ----- |
| AX    | Accumulator Register（累加器寄存器） | AH / AL | 通用寄存器 |
| BX    | Base Register（基址寄存器）         | BH / BL | 通用寄存器 |
| CX    | Count Register（计数寄存器）        | CH / CL | 通用寄存器 |
| DX    | Data Register（数据寄存器）         | DH / DL | 通用寄存器 |
| CS    | Code Segment（代码段寄存器）         | -       | 段寄存器  |
| DS    | Data Segment（数据段寄存器）         | -       | 段寄存器  |
| SS    | Stack Segment（栈段寄存器）         | -       | 段寄存器  |
| ES    | Extra Segment（附加段寄存器）        | -       | 段寄存器  |
| SP    | Stack Pointer（栈指针寄存器）        | -       | 指针寄存器 |
| BP    | Base Pointer（基址指针寄存器）        | -       | 指针寄存器 |
| SI    | Source Index（源变址寄存器）         | -       | 变址寄存器 |
| DI    | Destination Index（目的变址寄存器）   | -       | 变址寄存器 |
| IP    | Instruction Pointer（指令指针寄存器） | -       | 指令指针  |
| FLAGS | Flag Register（标志寄存器）         | -       | 标志寄存器 |

### AX寄存器
AX寄存器能够存储2个字节的数据，也就是16比特位，能够存储的最大值就是0xFFFF
```text
AX 寄存器 (16位)
┌─────────────────┬─────────────────┐
│       AH        │       AL        │
│ 0 0 0 0 0 0 0 0 │ 0 0 0 0 0 0 0 0 │
└─────────────────┴─────────────────┘

【例】存储18
┌─────────────────┬─────────────────┐
│       AH        │       AL        │
│ 0 0 0 0 0 0 0 0 │ 0 0 0 1 0 0 1 0 │
└─────────────────┴─────────────────┘
```
8086的寄存器是16位的，那么下一代的32位，64位的寄存兼容上一个代的示意图如下:
```text
EAX 寄存器 (32位)
┌─────────────────┬─────────────────┐
│                 │       AX        │
│      16bits     │      16bits     │
└─────────────────┴─────────────────┘
RAX 寄存器 (64位)
┌─────────────────┬─────────────────┐
│                 │       EAX       │
│      32bits     │      32bits     │
└─────────────────┴─────────────────┘
```

- 8086的 word size（字长）为16bit
- 80386的 word size 为32bit
- x86-64的 word size 为64bit

## 8086指令
### mov、add
```asm
mov ax, 18 ;将18存入寄存器ax

mov ah, 78 ;将78存入寄存器ax的高8位

add ax, 8  ;ax = ax + 8

mov ax, bx ;ax = bx

add ax, bx ;ax = ax + bx
```
【例】add al bl 若其中al溢出，那么是否会存储到ah中?
- 不会

## asm文件格式
- 汇编源代码，包括：
    1. 段定义（Segment）
    2. 数据定义（Data）
    3. 代码段（Code）
    4. 伪指令（Directive）
    5. 注释（Comment）
- 每一行可以包含：
    - 标签（Label）
    - 指令（Instruction）
    - 操作数（Operand）
    - 注释（以 `;` 开头）
### segment（段定义）
一个汇编程序由多个段组成，这些段通常用来存放代码、数据或者当作栈空间使用
每个段都需要一个段名
```asm
段名 segment 
....
段名 ends
```
